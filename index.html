<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blaze</title>
    <link rel="icon" type="image/x-icon" href="images/blaze-top.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css" id="code-theme-dark">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-light.min.css" id="code-theme-light">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #343541;
            --sidebar-bg: #202123;
            --sidebar-text: #ffffff;
            --chat-bg: #ffffff;
            --user-msg-bg: #f7f7f8;
            --bot-msg-bg: #ffffff;
            --input-bg: #ffffff;
            --input-border: #e5e5e5;
            --input-text: #343541;
            --button-bg: #f7f7f8;
            --button-hover: #e5e5e5;
            --button-text: #343541;
            --border-color: #e5e5e5;
            --header-bg: #ffffff;
            --header-text: #343541;
            --scrollbar-thumb: #d9d9e3;
            --scrollbar-track: #f7f7f8;
            --code-bg: #f7f7f8;
            --code-border: #e5e5e5;
            --code-text: #343541;
            --code-block-bg: #f7f7f8;
            --code-block-border: #e5e5e5;
            --code-toolbar-bg: #e5e5e5;
            --code-toolbar-text: #343541;
        }

        .dark-mode {
            --bg-color: #343541;
            --text-color: #ffffff;
            --sidebar-bg: #202123;
            --sidebar-text: #ffffff;
            --chat-bg: #343541;
            --user-msg-bg: #444654;
            --bot-msg-bg: #343541;
            --input-bg: #40414f;
            --input-border: #565869;
            --input-text: #ffffff;
            --button-bg: #40414f;
            --button-hover: #565869;
            --button-text: #ffffff;
            --border-color: #565869;
            --header-bg: #343541;
            --header-text: #ffffff;
            --scrollbar-thumb: #565869;
            --scrollbar-track: #40414f;
            --code-bg: #2d2d39;
            --code-border: #565869;
            --code-text: #ffffff;
            --code-block-bg: #2d2d39;
            --code-block-border: #565869;
            --code-toolbar-bg: #40414f;
            --code-toolbar-text: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background-color: var(--sidebar-bg);
            color: var(--sidebar-text);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s;
        }

        .sidebar-header {
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .new-chat-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            width: 100%;
            background: transparent;
            color: var(--sidebar-text);
            cursor: pointer;
            font-size: 14px;
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .history-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            transition: background-color 0.2s;
            position: relative;
        }

        .history-item i.fa-comment {
            margin-right: 12px;
            flex-shrink: 0;
        }

        .history-item span {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .history-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .sidebar-footer {
            padding: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 14px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: var(--header-bg);
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: var(--header-text);
            font-size: 20px;
            cursor: pointer;
            display: none;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--header-text);
            font-size: 20px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background-color: var(--chat-bg);
            transition: background-color 0.3s;
        }

        .message-container {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            display: flex;
            padding: 20px;
        }

        .user-message {
            background-color: var(--user-msg-bg);
        }

        .bot-message {
            background-color: var(--bot-msg-bg);
        }

        .avatar {
            width: 30px;
            height: 30px;
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            flex-shrink: 0;
        }

        .user-avatar {
            background-color: #5436da;
            color: white;
        }

        .bot-avatar {
            background-color: #10a37f;
            color: white;
        }

        .message-content {
            flex: 1;
            line-height: 1.5;
        }

        .input-container {
            padding: 20px;
            background-color: var(--chat-bg);
            border-top: 1px solid var(--border-color);
            transition: background-color 0.3s;
        }

        .input-box {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .message-input {
            width: 100%;
            padding: 12px 90px 12px 16px;
            border: 1px solid var(--input-border);
            border-radius: 6px;
            background-color: var(--input-bg);
            color: var(--input-text);
            font-size: 16px;
            resize: none;
            height: 52px;
            max-height: 200px;
            overflow-y: auto;
            transition: border-color 0.3s, background-color 0.3s, color 0.3s;
        }

        .message-input:focus {
            outline: none;
            border-color: #10a37f;
        }

        .input-buttons {
            position: absolute;
            right: 10px;
            bottom: 10px;
            display: flex;
            gap: 8px;
        }

        .send-button, .code-button {
            background: none;
            border: none;
            color: var(--button-text);
            cursor: pointer;
            font-size: 18px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .send-button:hover, .code-button:hover {
            background-color: var(--button-hover);
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px;
            color: var(--text-color);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--text-color);
            border-radius: 50%;
            animation: typing-animation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing-animation {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--scrollbar-track);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb);
            border-radius: 3px;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                z-index: 100;
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .menu-toggle {
                display: block;
            }
        }

        /* Empty state */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 20px;
        }

        .empty-state h1 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .empty-state p {
            font-size: 16px;
            color: #888;
            max-width: 500px;
            margin-bottom: 30px;
        }

        .examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            width: 100%;
            max-width: 800px;
        }

        .example-item {
            padding: 12px;
            background-color: var(--button-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .example-item:hover {
            background-color: var(--button-hover);
        }

        .header-buttons {
            display: flex;
            gap: 10px;
        }

        .close-button {
            background: none;
            border: none;
            color: var(--header-text);
            font-size: 20px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-button:hover {
            color: #ff5555;
        }

        .delete-history-btn, .edit-history-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            padding: 5px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .delete-history-btn {
            margin-left: 5px;
        }

        .edit-history-btn {
            margin-left: 5px;
        }

        .delete-history-btn:hover {
            color: #ff5555;
        }

        .edit-history-btn:hover {
            color: #55aaff;
        }

        /* Code snippet styles */
        .code-block-container {
            position: relative;
            margin: 15px 0;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--code-block-border);
            background-color: var(--code-block-bg);
        }

        .code-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background-color: var(--code-toolbar-bg);
            color: var(--code-toolbar-text);
            font-size: 14px;
        }

        .code-language {
            font-weight: 500;
        }

        .code-actions {
            display: flex;
            gap: 8px;
        }

        .copy-code-btn {
            background: none;
            border: none;
            color: var(--code-toolbar-text);
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .copy-code-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .code-content {
            padding: 12px;
            overflow-x: auto;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        pre {
            margin: 0;
            white-space: pre-wrap;
        }

        code {
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
        }

        /* Code snippet modal */
        .code-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .code-modal-content {
            background-color: var(--bg-color);
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .code-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .code-modal-title {
            font-size: 18px;
            font-weight: 600;
        }

        .code-modal-close {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 20px;
            cursor: pointer;
        }

        .code-modal-body {
            padding: 16px;
            overflow-y: auto;
            flex: 1;
        }

        .code-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 500;
            font-size: 14px;
        }

        .form-select, .form-textarea {
            padding: 10px;
            border: 1px solid var(--input-border);
            border-radius: 6px;
            background-color: var(--input-bg);
            color: var(--input-text);
            font-size: 14px;
        }

        .form-textarea {
            min-height: 200px;
            resize: vertical;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
        }

        .code-modal-footer {
            display: flex;
            justify-content: flex-end;
            padding: 16px;
            border-top: 1px solid var(--border-color);
            gap: 12px;
        }

        .code-modal-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .code-modal-cancel {
            background-color: var(--button-bg);
            color: var(--button-text);
            border: 1px solid var(--border-color);
        }

        .code-modal-submit {
            background-color: #10a37f;
            color: white;
            border: none;
        }

        .code-modal-cancel:hover {
            background-color: var(--button-hover);
        }

        .code-modal-submit:hover {
            background-color: #0d8c6d;
        }

        /* Inline code */
        .inline-code {
            background-color: var(--code-bg);
            border: 1px solid var(--code-border);
            border-radius: 4px;
            padding: 2px 4px;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            color: var(--code-text);
        }

        /* Dark mode specific styles for code blocks */
        .dark-mode #code-theme-light {
            disabled: true;
        }

        .dark-mode #code-theme-dark {
            disabled: false;
        }

        /* Light mode specific styles for code blocks */
        #code-theme-dark {
            disabled: true;
        }

        #code-theme-light {
            disabled: false;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <button class="new-chat-btn" id="new-chat-btn">
                <i class="fas fa-plus"></i>
                New chat
            </button>
        </div>
        <div class="chat-history" id="chat-history">
            <!-- Chat history items will be added here -->
        </div>
        <div class="sidebar-footer">
            <div class="cont">contact:</div>

            <style>
                .cont{
                    font-family: 'Titillium Web', sans-serif;
                        height: auto;
                        width: auto;
                        text-size-adjust: auto;
                        font-size: 22px;
                }
            </style>
<a href="https://github.com/BLAZEEDITZ" target="_blank" style="text-decoration: none; color: inherit;">
<div class="social-links">
    <div class="social-btn flex-center" id="twitter">
      <svg viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
      </svg>
      <span>@SOON!</span>
    </div>
    </a>
  
    <a href="https://www.instagram.com/yogesh_h4x/" target="_blank" style="text-decoration: none; color: inherit;">
    <div class="social-btn flex-center" id="instagram">
      <svg viewBox="0 0 15 17" height="24" width="24" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"></path>
      </svg>
      <span>yogesh_h4x</span>
    </div>
</a>
  
<a href="https://github.com/BLAZEEDITZ" target="_blank" style="text-decoration: none; color: inherit;">
    <div class="social-btn flex-center" id="github">
      <svg viewBox="0 0 24 24" height="24" width="24" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
      </svg>
      <span>BLAZEEDITZ</span>
    </div>
  </div>
  </a>

  <style>

  .social-links, .flex-center {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .social-btn {
    cursor: pointer;
    height: 25px;
    width: 25px;
    font-family: 'Titillium Web', sans-serif;
    color: #ffffff;
    border-radius: 10px;
    box-shadow: 0px 10px 10px rgba(0,0,0,0.1);
    background: transparent;
    margin: 5px;
    transition: 0.3s;
    justify-content: center;
  }
  
  .social-btn svg {
    height: 24px;
    width: 24px;
  }
  
  .social-btn span {
    width: 0px;
    overflow: hidden;
    transition: 0.3s;
    text-align: center;
    margin-left: 5px;
  }
  
  .social-btn:hover {
    width: 150px;
    border-radius: 5px;
  }
  
  .social-btn:hover span {
    padding: 2px;
    width: 80px;
  }
  
  #twitter svg,
  #instagram svg,
  #github svg {
    fill: #ffffff;
  }
  </style>
  
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="chat-header">
            <button class="menu-toggle" id="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <div>Blaze</div>
            <div class="header-buttons">
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>

        <div class="chat-container" id="chat-container">
            <div class="message-container" id="message-container">
                <!-- Messages will be added here -->
            </div>
        </div>

        <div class="input-container">
            <div class="input-box">
                <textarea class="message-input" id="message-input" placeholder="Send a message..." rows="1"></textarea>
                <div class="input-buttons">
                    <button class="code-button" id="code-button" title="Request code snippet">
                        <i class="fas fa-code"></i>
                    </button>
                    <button class="send-button" id="send-button">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Code Snippet Modal -->
    <div class="code-modal" id="code-modal">
        <div class="code-modal-content">
            <div class="code-modal-header">
                <div class="code-modal-title">Request Code Snippet</div>
                <button class="code-modal-close" id="code-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="code-modal-body">
                <form class="code-form" id="code-form">
                    <div class="form-group">
                        <label class="form-label" for="code-language">Language</label>
                        <select class="form-select" id="code-language">
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="java">Java</option>
                            <option value="csharp">C#</option>
                            <option value="cpp">C++</option>
                            <option value="php">PHP</option>
                            <option value="ruby">Ruby</option>
                            <option value="swift">Swift</option>
                            <option value="go">Go</option>
                            <option value="rust">Rust</option>
                            <option value="typescript">TypeScript</option>
                            <option value="html">HTML</option>
                            <option value="css">CSS</option>
                            <option value="sql">SQL</option>
                            <option value="bash">Bash</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="code-description">What would you like to see?</label>
                        <textarea class="form-textarea" id="code-description" placeholder="Describe the code you want to see..."></textarea>
                    </div>
                </form>
            </div>
            <div class="code-modal-footer">
                <button class="code-modal-btn code-modal-cancel" id="code-modal-cancel">Cancel</button>
                <button class="code-modal-btn code-modal-submit" id="code-modal-submit">Request Code</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const body = document.body;
        const sidebar = document.getElementById('sidebar');
        const menuToggle = document.getElementById('menu-toggle');
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');
        const chatContainer = document.getElementById('chat-container');
        const messageContainer = document.getElementById('message-container');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const newChatBtn = document.getElementById('new-chat-btn');
        const chatHistory = document.getElementById('chat-history');
        const codeButton = document.getElementById('code-button');
        const codeModal = document.getElementById('code-modal');
        const codeModalClose = document.getElementById('code-modal-close');
        const codeModalCancel = document.getElementById('code-modal-cancel');
        const codeModalSubmit = document.getElementById('code-modal-submit');
        const codeForm = document.getElementById('code-form');
        const codeLanguage = document.getElementById('code-language');
        const codeDescription = document.getElementById('code-description');

        // Check for saved theme preference or default to light
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            body.classList.add('dark-mode');
            themeIcon.classList.replace('fa-moon', 'fa-sun');
        }

        // Check for saved chat history
        let conversations = JSON.parse(localStorage.getItem('chatHistory')) || [];
        let currentConversationId = localStorage.getItem('currentConversationId');
        let currentConversation = [];

        // Initialize the UI
        function initializeUI() {
            // Show empty state if no current conversation
            if (!currentConversationId || !conversations.find(c => c.id === currentConversationId)) {
                showEmptyState();
            } else {
                // Load current conversation
                currentConversation = conversations.find(c => c.id === currentConversationId).messages;
                renderMessages(currentConversation);
            }
            
            // Render chat history
            renderChatHistory();
        }

        // Show empty state with examples
        function showEmptyState() {
            messageContainer.innerHTML = `
                <div class="empty-state">
                    <h1>Blaze</h1>
                    <p>How can I help you today?</p>
                    <div class="examples">
                        <div class="example-item" data-prompt="Explain quantum computing in simple terms">
                            Explain quantum computing in simple terms
                        </div>
                        <div class="example-item" data-prompt="Got any creative ideas for a 10 year old's birthday?">
                            Got any creative ideas for a 10 year old's birthday?
                        </div>
                        <div class="example-item" data-prompt="How do I make an HTTP request in Javascript?">
                            How do I make an HTTP request in Javascript?
                        </div>
                    </div>
                </div>
            `;

            // Add event listeners to example items
            document.querySelectorAll('.example-item').forEach(item => {
                item.addEventListener('click', () => {
                    const prompt = item.getAttribute('data-prompt');
                    messageInput.value = prompt;
                    sendMessage();
                });
            });
        }

        // Render chat history in sidebar
        function renderChatHistory() {
            chatHistory.innerHTML = '';
            conversations.forEach(conversation => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const icon = document.createElement('i');
                icon.className = 'fas fa-comment';
                
                const span = document.createElement('span');
                span.textContent = conversation.title || 'New conversation';
                
                const editBtn = document.createElement('button');
                editBtn.className = 'edit-history-btn';
                editBtn.setAttribute('data-id', conversation.id);
                editBtn.innerHTML = '<i class="fas fa-pen"></i>';
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'delete-history-btn';
                deleteBtn.setAttribute('data-id', conversation.id);
                deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                
                historyItem.appendChild(icon);
                historyItem.appendChild(span);
                historyItem.appendChild(editBtn);
                historyItem.appendChild(deleteBtn);
                
                // Add click event to the history item (excluding buttons)
                span.addEventListener('click', () => {
                    loadConversation(conversation.id);
                });
                icon.addEventListener('click', () => {
                    loadConversation(conversation.id);
                });
                
                // Add click events to buttons
                editBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    editConversationTitle(conversation.id);
                });
                
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    deleteConversation(conversation.id);
                });
                
                chatHistory.appendChild(historyItem);
            });
        }

        // Load a conversation from history
        function loadConversation(id) {
            currentConversationId = id;
            localStorage.setItem('currentConversationId', id);
            currentConversation = conversations.find(c => c.id === id).messages;
            renderMessages(currentConversation);
            
            // Close sidebar on mobile after selection
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('active');
            }
        }

        // Delete a conversation from history
        function deleteConversation(id) {
            conversations = conversations.filter(c => c.id !== id);
            localStorage.setItem('chatHistory', JSON.stringify(conversations));
            
            // If the deleted conversation was the current one, create a new one
            if (id === currentConversationId) {
                createNewConversation();
            } else {
                renderChatHistory();
            }
        }

        // Create a new conversation
        function createNewConversation() {
            const newId = Date.now().toString();
            const newConversation = {
                id: newId,
                title: 'New conversation',
                messages: []
            };
            
            conversations.unshift(newConversation);
            localStorage.setItem('chatHistory', JSON.stringify(conversations));
            
            currentConversationId = newId;
            localStorage.setItem('currentConversationId', newId);
            currentConversation = [];
            
            renderChatHistory();
            messageContainer.innerHTML = '';
            showEmptyState();
        }

        // Render messages in the chat container
        function renderMessages(messages) {
            messageContainer.innerHTML = '';
            messages.forEach(message => {
                const messageElement = createMessageElement(message.content, message.role === 'user');
                messageContainer.appendChild(messageElement);
            });
            scrollToBottom();
            
            // Apply syntax highlighting to code blocks
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        }

        // Create a message element
        function createMessageElement(content, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            const avatar = document.createElement('div');
            avatar.className = `avatar ${isUser ? 'user-avatar' : 'bot-avatar'}`;
            avatar.innerHTML = isUser ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            
            // Process content for code blocks
            const processedContent = processMessageContent(content);
            messageContent.innerHTML = processedContent;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            // Add event listeners to copy buttons
            setTimeout(() => {
                messageDiv.querySelectorAll('.copy-code-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const codeBlock = btn.closest('.code-block-container').querySelector('code');
                        copyToClipboard(codeBlock.textContent);
                        btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        setTimeout(() => {
                            btn.innerHTML = '<i class="fas fa-copy"></i> Copy';
                        }, 2000);
                    });
                });
            }, 0);
            
            return messageDiv;
        }

        // Process message content to detect and format code blocks
        function processMessageContent(content) {
            // Replace code blocks with formatted HTML
            let processedContent = content.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, language, code) => {
                const lang = language || 'plaintext';
                return `
                <div class="code-block-container">
                    <div class="code-toolbar">
                        <div class="code-language">${lang}</div>
                        <div class="code-actions">
                            <button class="copy-code-btn">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                    </div>
                    <div class="code-content">
                        <pre><code class="language-${lang}">${escapeHtml(code)}</code></pre>
                    </div>
                </div>
                `;
            });
            
            // Replace inline code with formatted HTML
            processedContent = processedContent.replace(/`([^`]+)`/g, '<span class="inline-code">$1</span>');
            
            // Replace newlines with <br> tags
            processedContent = processedContent.replace(/\n/g, '<br>');
            
            return processedContent;
        }

        // Escape HTML special characters
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Copy text to clipboard
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }

        // Add a typing indicator
        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message';
            typingDiv.id = 'typing-indicator';
            
            const avatar = document.createElement('div');
            avatar.className = 'avatar bot-avatar';
            avatar.innerHTML = '<i class="fas fa-robot"></i>';
            
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'typing-indicator';
            typingIndicator.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            
            typingDiv.appendChild(avatar);
            typingDiv.appendChild(typingIndicator);
            
            messageContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        // Remove typing indicator
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Scroll to the bottom of the chat container
        function scrollToBottom() {
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Update conversation title based on first message
        function updateConversationTitle(message) {
            if (currentConversation.length === 1 && currentConversation[0].role === 'user') {
                const title = message.substring(0, 30) + (message.length > 30 ? '...' : '');
                const conversationIndex = conversations.findIndex(c => c.id === currentConversationId);
                if (conversationIndex !== -1) {
                    conversations[conversationIndex].title = title;
                    localStorage.setItem('chatHistory', JSON.stringify(conversations));
                    renderChatHistory();
                }
            }
        }

        // Edit conversation title
        function editConversationTitle(id) {
            const conversation = conversations.find(c => c.id === id);
            if (!conversation) return;
            
            const newTitle = prompt('Enter a new name for this conversation:', conversation.title);
            if (newTitle !== null && newTitle.trim() !== '') {
                conversation.title = newTitle.trim();
                localStorage.setItem('chatHistory', JSON.stringify(conversations));
                renderChatHistory();
            }
        }

        // Send a message
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;
            
            // Create new conversation if none exists
            if (!currentConversationId || !conversations.find(c => c.id === currentConversationId)) {
                createNewConversation();
            }
            
            // Add user message to UI
            const userMessageElement = createMessageElement(message, true);
            messageContainer.appendChild(userMessageElement);
            
            // Add user message to conversation
            currentConversation.push({
                role: 'user',
                content: message
            });
            
            // Update conversation in storage
            const conversationIndex = conversations.findIndex(c => c.id === currentConversationId);
            if (conversationIndex !== -1) {
                conversations[conversationIndex].messages = currentConversation;
                localStorage.setItem('chatHistory', JSON.stringify(conversations));
            }
            
            // Update title if this is the first message
            updateConversationTitle(message);
            
            // Clear input and scroll to bottom
            messageInput.value = '';
            scrollToBottom();
            
            // Show typing indicator
            addTypingIndicator();
            
            try {
                // Call API to get response
                const response = await fetchResponse(message);
                
                // Remove typing indicator
                removeTypingIndicator();
                
                // Add bot message to UI
                const botMessageElement = createMessageElement(response, false);
                messageContainer.appendChild(botMessageElement);
                
                // Add bot message to conversation
                currentConversation.push({
                    role: 'assistant',
                    content: response
                });
                
                // Update conversation in storage
                if (conversationIndex !== -1) {
                    conversations[conversationIndex].messages = currentConversation;
                    localStorage.setItem('chatHistory', JSON.stringify(conversations));
                }
                
                scrollToBottom();
            } catch (error) {
                console.error('Error:', error);
                removeTypingIndicator();
                
                // Add error message
                const errorMessageElement = createMessageElement('Sorry, there was an error processing your request. Please try again.', false);
                messageContainer.appendChild(errorMessageElement);
                scrollToBottom();
            }
        }

        // Request code snippet
        async function requestCodeSnippet() {
            const language = codeLanguage.value;
            const description = codeDescription.value.trim();
            
            if (!description) {
                alert('Please describe the code you want to see.');
                return;
            }
            
            // Close the modal
            codeModal.style.display = 'none';
            
            // Create the message
            const message = `Generate a ${language} code snippet for: ${description}`;
            messageInput.value = message;
            
            // Send the message
            sendMessage();
            
            // Reset form
            codeDescription.value = '';
        }

        // Fetch response from API
        async function fetchResponse(userMessage) {
            try {
                const response = await fetch("https://backend.buildpicoapps.com/aero/run/llm-api?pk=v1-Z0FBQUFBQm5IZkJDMlNyYUVUTjIyZVN3UWFNX3BFTU85SWpCM2NUMUk3T2dxejhLSzBhNWNMMXNzZlp3c09BSTR6YW1Sc1BmdGNTVk1GY0liT1RoWDZZX1lNZlZ0Z1dqd3c9PQ==", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        prompt: userMessage
                    })
                });

                if (!response.ok) {
                    throw new Error(response.statusText);
                }

                const data = await response.json();

                if (data.status === "success") {
                    return data.text;
                } else {
                    throw new Error("API returned error status");
                }
            } catch (error) {
                console.error("Error:", error);
                return "I'm sorry, I couldn't process your request. Please try again later.";
            }
        }

        // Auto-resize textarea
        function autoResizeTextarea() {
            messageInput.style.height = 'auto';
            messageInput.style.height = (messageInput.scrollHeight) + 'px';
        }

        // Event Listeners
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            
            // Update icon
            if (isDarkMode) {
                themeIcon.classList.replace('fa-moon', 'fa-sun');
            } else {
                themeIcon.classList.replace('fa-sun', 'fa-moon');
            }
            
            // Save preference
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
        });

        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        sendButton.addEventListener('click', sendMessage);

        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        messageInput.addEventListener('input', autoResizeTextarea);

        newChatBtn.addEventListener('click', createNewConversation);

        // Code snippet modal events
        codeButton.addEventListener('click', () => {
            codeModal.style.display = 'flex';
        });

        codeModalClose.addEventListener('click', () => {
            codeModal.style.display = 'none';
        });

        codeModalCancel.addEventListener('click', () => {
            codeModal.style.display = 'none';
        });

        codeModalSubmit.addEventListener('click', requestCodeSnippet);

        codeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            requestCodeSnippet();
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === codeModal) {
                codeModal.style.display = 'none';
            }
        });

        // Initialize highlight.js
        document.addEventListener('DOMContentLoaded', () => {
            hljs.configure({
                languages: ['javascript', 'python', 'java', 'csharp', 'cpp', 'php', 'ruby', 'swift', 'go', 'rust', 'typescript', 'html', 'css', 'sql', 'bash']
            });
            hljs.highlightAll();
        });

        // Initialize the application
        initializeUI();
    </script>
</body>
</html>
